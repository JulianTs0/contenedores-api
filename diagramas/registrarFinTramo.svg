<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1034px" preserveAspectRatio="none" style="width:1026px;height:1034px;" version="1.1" viewBox="0 0 1026 1034" width="1026px" zoomAndPan="magnify"><defs><filter height="300%" id="f19af14p3smqbz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="303" x="362.5" y="26.708">TramoService - registrarFinTramo</text><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="859.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="239" y="152.3828"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="411" y="181.5156"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="411" y="414.5781"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="411" y="762.0391"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539.5" y="239.7813"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539.5" y="909.7031"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539.5" y="967.9688"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="298.0469"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="356.3125"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="497.8438"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="556.1094"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="645.5078"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="703.7734"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="928.5" y="844.4375"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="688" x="184" y="459.5781"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="397.8594" style="stroke: #000000; stroke-width: 2.0;" width="841" x="174" y="607.2422"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="821" x="184" y="806.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="48" x2="48" y1="121.25" y2="1022.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="244" x2="244" y1="121.25" y2="1022.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="416" x2="416" y1="121.25" y2="1022.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="544" x2="544" y1="121.25" y2="1022.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="659" x2="659" y1="121.25" y2="1022.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="792" x2="792" y1="121.25" y2="1022.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="933" x2="933" y1="121.25" y2="1022.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="8" y="117.9482">Cliente/API</text><ellipse cx="48" cy="47.9531" fill="#FEFECE" filter="url(#f19af14p3smqbz)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M48,55.9531 L48,82.9531 M35,63.9531 L61,63.9531 M48,82.9531 L35,97.9531 M48,82.9531 L61,97.9531 " fill="none" filter="url(#f19af14p3smqbz)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="194" y="117.9482">TramoService</text><ellipse cx="244" cy="88.9531" fill="#FEFECE" filter="url(#f19af14p3smqbz)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="240,76.9531,246,71.9531,244,76.9531,246,81.9531,240,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f19af14p3smqbz)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="348" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="355" y="105.9482">TramoRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="494" y="117.9482">EnviosService</text><ellipse cx="544.5" cy="88.9531" fill="#FEFECE" filter="url(#f19af14p3smqbz)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="540.5,76.9531,546.5,71.9531,544.5,76.9531,546.5,81.9531,540.5,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="605" y="117.9482">CamionService</text><ellipse cx="659" cy="88.9531" fill="#FEFECE" filter="url(#f19af14p3smqbz)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="655,76.9531,661,71.9531,659,76.9531,661,81.9531,655,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="723" y="117.9482">ContenedorService</text><ellipse cx="792.5" cy="88.9531" fill="#FEFECE" filter="url(#f19af14p3smqbz)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="788.5,76.9531,794.5,71.9531,792.5,76.9531,794.5,81.9531,788.5,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="872" y="117.9482">UbicacionService</text><ellipse cx="933.5" cy="88.9531" fill="#FEFECE" filter="url(#f19af14p3smqbz)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="929.5,76.9531,935.5,71.9531,933.5,76.9531,935.5,81.9531,929.5,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="859.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="239" y="152.3828"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="411" y="181.5156"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="411" y="414.5781"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="411" y="762.0391"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539.5" y="239.7813"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539.5" y="909.7031"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539.5" y="967.9688"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="298.0469"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="356.3125"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="497.8438"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="556.1094"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="645.5078"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787.5" y="703.7734"/><rect fill="#FFFFFF" filter="url(#f19af14p3smqbz)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="928.5" y="844.4375"/><polygon fill="#A80036" points="227,148.3828,237,152.3828,227,156.3828,231,152.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="233" y1="152.3828" y2="152.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="55" y="147.3169">registrarFinTramo(request)</text><polygon fill="#A80036" points="399,177.5156,409,181.5156,399,185.5156,403,181.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="405" y1="181.5156" y2="181.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="256" y="176.4497">getById(idTramo)</text><polygon fill="#A80036" points="260,206.6484,250,210.6484,260,214.6484,256,210.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="415" y1="210.6484" y2="210.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="266" y="205.5825">tramo</text><polygon fill="#A80036" points="527.5,235.7813,537.5,239.7813,527.5,243.7813,531.5,239.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="533.5" y1="239.7813" y2="239.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="256" y="234.7153">getSolicitudTrasladoById(idSolicitud)</text><polygon fill="#A80036" points="260,264.9141,250,268.9141,260,272.9141,256,268.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="543.5" y1="268.9141" y2="268.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="266" y="263.8481">solicitud</text><polygon fill="#A80036" points="642,294.0469,652,298.0469,642,302.0469,646,298.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="648" y1="298.0469" y2="298.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="256" y="292.981">getById(dominio)</text><polygon fill="#A80036" points="260,323.1797,250,327.1797,260,331.1797,256,327.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="658" y1="327.1797" y2="327.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="266" y="322.1138">camion</text><polygon fill="#A80036" points="642,352.3125,652,356.3125,642,360.3125,646,356.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="648" y1="356.3125" y2="356.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="256" y="351.2466">cambiarDisponibilidad(true)</text><polygon fill="#A80036" points="260,381.4453,250,385.4453,260,389.4453,256,385.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="658" y1="385.4453" y2="385.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="266" y="380.3794">response</text><polygon fill="#A80036" points="399,410.5781,409,414.5781,399,418.5781,403,414.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="405" y1="414.5781" y2="414.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="256" y="409.5122">update(tramo)</text><path d="M184,459.5781 L254,459.5781 L254,466.5781 L244,476.5781 L184,476.5781 L184,459.5781 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="688" x="184" y="459.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="199" y="472.645">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="269" y="471.7886">[Fin en Depósito]</text><polygon fill="#A80036" points="775.5,493.8438,785.5,497.8438,775.5,501.8438,779.5,497.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="781.5" y1="497.8438" y2="497.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="256" y="492.7778">getById(idContenedor)</text><polygon fill="#A80036" points="260,522.9766,250,526.9766,260,530.9766,256,526.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="791.5" y1="526.9766" y2="526.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="266" y="521.9106">contenedor</text><polygon fill="#A80036" points="775.5,552.1094,785.5,556.1094,775.5,560.1094,779.5,556.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="781.5" y1="556.1094" y2="556.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="256" y="551.0435">cambioDeEstado(en_deposito)</text><polygon fill="#A80036" points="260,581.2422,250,585.2422,260,589.2422,256,585.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="791.5" y1="585.2422" y2="585.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="266" y="580.1763">response</text><path d="M174,607.2422 L244,607.2422 L244,614.2422 L234,624.2422 L174,624.2422 L174,607.2422 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="397.8594" style="stroke: #000000; stroke-width: 2.0;" width="841" x="174" y="607.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="189" y="620.3091">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="259" y="619.4526">[Ultimo Tramo]</text><polygon fill="#A80036" points="775.5,641.5078,785.5,645.5078,775.5,649.5078,779.5,645.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="781.5" y1="645.5078" y2="645.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="256" y="640.4419">getById(idContenedor)</text><polygon fill="#A80036" points="260,670.6406,250,674.6406,260,678.6406,256,674.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="791.5" y1="674.6406" y2="674.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="266" y="669.5747">contenedor</text><polygon fill="#A80036" points="775.5,699.7734,785.5,703.7734,775.5,707.7734,779.5,703.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="781.5" y1="703.7734" y2="703.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="256" y="698.7075">cambioDeEstado(entregado)</text><polygon fill="#A80036" points="260,728.9063,250,732.9063,260,736.9063,256,732.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="791.5" y1="732.9063" y2="732.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="266" y="727.8403">response</text><polygon fill="#A80036" points="399,758.0391,409,762.0391,399,766.0391,403,762.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="405" y1="762.0391" y2="762.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="256" y="756.9731">buscarPorRuta(idRuta)</text><polygon fill="#A80036" points="260,787.1719,250,791.1719,260,795.1719,256,791.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="415" y1="791.1719" y2="791.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="266" y="786.106">listaTramos</text><path d="M184,806.1719 L261,806.1719 L261,813.1719 L251,823.1719 L184,823.1719 L184,806.1719 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="821" x="184" y="806.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="199" y="819.2388">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="161" x="276" y="818.3823">[Calcular costo estadías]</text><polygon fill="#A80036" points="916.5,840.4375,926.5,844.4375,916.5,848.4375,920.5,844.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="922.5" y1="844.4375" y2="844.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="256" y="839.3716">getUbicacionById(idDestino)</text><polygon fill="#A80036" points="260,869.5703,250,873.5703,260,877.5703,256,873.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="932.5" y1="873.5703" y2="873.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="266" y="868.5044">ubicacion</text><polygon fill="#A80036" points="527.5,905.7031,537.5,909.7031,527.5,913.7031,531.5,909.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="533.5" y1="909.7031" y2="909.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="256" y="904.6372">editSolicitud(costoFinal, tiempoReal)</text><polygon fill="#A80036" points="260,934.8359,250,938.8359,260,942.8359,256,938.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="543.5" y1="938.8359" y2="938.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="266" y="933.77">response</text><polygon fill="#A80036" points="527.5,963.9688,537.5,967.9688,527.5,971.9688,531.5,967.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="533.5" y1="967.9688" y2="967.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="256" y="962.9028">cambioDeEstadoSolicitud(entregado)</text><polygon fill="#A80036" points="260,993.1016,250,997.1016,260,1001.1016,256,997.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="543.5" y1="997.1016" y2="997.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="266" y="992.0356">response</text><!--MD5=[2f78abdc1ad27c39f6010b729cc021e3]
@startuml
title TramoService - registrarFinTramo

hide footbox

actor "Cliente/API" as C
control "TramoService" as TS
participant "TramoRepository" as TR
control "EnviosService" as ES
control "CamionService" as CMS
control "ContenedorService" as CS
control "UbicacionService" as UBS

C -> TS: registrarFinTramo(request)
activate TS

TS -> TR: getById(idTramo)
activate TR
TR - -> TS: tramo
deactivate TR

TS -> ES: getSolicitudTrasladoById(idSolicitud)
activate ES
ES - -> TS: solicitud
deactivate ES

TS -> CMS: getById(dominio)
activate CMS
CMS - -> TS: camion
deactivate CMS

TS -> CMS: cambiarDisponibilidad(true)
activate CMS
CMS - -> TS: response
deactivate CMS

TS -> TR: update(tramo)
activate TR
deactivate TR

opt Fin en Depósito
    TS -> CS: getById(idContenedor)
    activate CS
    CS - -> TS: contenedor
    deactivate CS

    TS -> CS: cambioDeEstado(en_deposito)
    activate CS
    CS - -> TS: response
    deactivate CS
end

opt Ultimo Tramo
    TS -> CS: getById(idContenedor)
    activate CS
    CS - -> TS: contenedor
    deactivate CS

    TS -> CS: cambioDeEstado(entregado)
    activate CS
    CS - -> TS: response
    deactivate CS

    TS -> TR: buscarPorRuta(idRuta)
    activate TR
    TR - -> TS: listaTramos
    deactivate TR
    
    loop Calcular costo estadías
        TS -> UBS: getUbicacionById(idDestino)
        activate UBS
        UBS - -> TS: ubicacion
        deactivate UBS
    end
    
    TS -> ES: editSolicitud(costoFinal, tiempoReal)
    activate ES
    ES - -> TS: response
    deactivate ES

    TS -> ES: cambioDeEstadoSolicitud(entregado)
    activate ES
    ES - -> TS: response
    deactivate ES
end

deactivate TS
@enduml

PlantUML version 1.2020.02(Sun Mar 01 07:22:07 ART 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-LTS
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>