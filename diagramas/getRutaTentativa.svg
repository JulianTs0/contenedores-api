<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1106px" preserveAspectRatio="none" style="width:1503px;height:1106px;" version="1.1" viewBox="0 0 1503 1106" width="1503px" zoomAndPan="magnify"><defs><filter height="300%" id="f1wo0iva596zmm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="280" x="612.5" y="26.708">RutaService - getRutaTentativa</text><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="923.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="235" y="152.3828"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="495" y="181.5156"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="495" y="959.7734"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="118.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="625" y="239.7813"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="767" y="293.0469"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885" y="387.4453"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885" y="445.7109"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011" y="503.9766"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011" y="630.3125"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011" y="1018.0391"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1151" y="901.5078"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1290.5" y="719.7109"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1290.5" y="777.9766"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1419.5" y="836.2422"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="285.5" x="550.5" y="254.7813"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="119.3359" style="stroke: #000000; stroke-width: 2.0;" width="1048" x="186" y="548.1094"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="1048" x="186" y="594.375"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="191.9297" style="stroke: #000000; stroke-width: 2.0;" width="1306" x="186" y="681.4453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="48" x2="48" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="240" x2="240" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="499.5" x2="499.5" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="629.5" x2="629.5" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="772" x2="772" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="890" x2="890" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1016" x2="1016" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1156" x2="1156" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1295" x2="1295" y1="121.25" y2="1094.3047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1424" x2="1424" y1="121.25" y2="1094.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="8" y="117.9482">Cliente/API</text><ellipse cx="48" cy="47.9531" fill="#FEFECE" filter="url(#f1wo0iva596zmm)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M48,55.9531 L48,82.9531 M35,63.9531 L61,63.9531 M48,82.9531 L35,97.9531 M48,82.9531 L61,97.9531 " fill="none" filter="url(#f1wo0iva596zmm)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="196" y="117.9482">RutaService</text><ellipse cx="240" cy="88.9531" fill="#FEFECE" filter="url(#f1wo0iva596zmm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="236,76.9531,242,71.9531,240,76.9531,242,81.9531,236,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="449.5" y="117.9482">EnviosService</text><ellipse cx="500" cy="88.9531" fill="#FEFECE" filter="url(#f1wo0iva596zmm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="496,76.9531,502,71.9531,500,76.9531,502,81.9531,496,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="560.5" y="117.9482">ContenedorService</text><ellipse cx="630" cy="88.9531" fill="#FEFECE" filter="url(#f1wo0iva596zmm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="626,76.9531,632,71.9531,630,76.9531,632,81.9531,626,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="718" y="117.9482">UsuarioService</text><ellipse cx="772" cy="88.9531" fill="#FEFECE" filter="url(#f1wo0iva596zmm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="768,76.9531,774,71.9531,772,76.9531,774,81.9531,768,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="836" y="117.9482">CamionService</text><ellipse cx="890" cy="88.9531" fill="#FEFECE" filter="url(#f1wo0iva596zmm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="886,76.9531,892,71.9531,890,76.9531,892,81.9531,886,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1wo0iva596zmm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="954" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="961" y="105.9482">RutaRepository</text><rect fill="#FEFECE" filter="url(#f1wo0iva596zmm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="1088" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="1095" y="105.9482">TramoRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="1234" y="117.9482">UbicacionService</text><ellipse cx="1295.5" cy="88.9531" fill="#FEFECE" filter="url(#f1wo0iva596zmm)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1291.5,76.9531,1297.5,71.9531,1295.5,76.9531,1297.5,81.9531,1291.5,76.9531" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1wo0iva596zmm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="1367" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="1374" y="105.9482">OsrmApiClient</text><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="923.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="235" y="152.3828"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="495" y="181.5156"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="495" y="959.7734"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="118.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="625" y="239.7813"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="767" y="293.0469"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885" y="387.4453"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885" y="445.7109"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011" y="503.9766"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011" y="630.3125"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011" y="1018.0391"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1151" y="901.5078"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1290.5" y="719.7109"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1290.5" y="777.9766"/><rect fill="#FFFFFF" filter="url(#f1wo0iva596zmm)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1419.5" y="836.2422"/><polygon fill="#A80036" points="223,148.3828,233,152.3828,223,156.3828,227,152.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="229" y1="152.3828" y2="152.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="55" y="147.3169">getRutaTentativa(request)</text><polygon fill="#A80036" points="483,177.5156,493,181.5156,483,185.5156,487,181.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="489" y1="181.5156" y2="181.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="252" y="176.4497">getSolicitudTrasladoById(idSolicitud)</text><polygon fill="#A80036" points="256,206.6484,246,210.6484,256,214.6484,252,210.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="499" y1="210.6484" y2="210.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="262" y="205.5825">solicitud</text><polygon fill="#A80036" points="613,235.7813,623,239.7813,613,243.7813,617,239.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="619" y1="239.7813" y2="239.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="252" y="234.7153">getById(idContenedor)</text><path d="M550.5,254.7813 L620.5,254.7813 L620.5,261.7813 L610.5,271.7813 L550.5,271.7813 L550.5,254.7813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="285.5" x="550.5" y="254.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="565.5" y="267.8481">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="635.5" y="266.9917">[idCliente != null]</text><polygon fill="#A80036" points="755,289.0469,765,293.0469,755,297.0469,759,293.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="635" x2="761" y1="293.0469" y2="293.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="642" y="287.981">getById(idCliente)</text><polygon fill="#A80036" points="646,318.1797,636,322.1797,646,326.1797,642,322.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="640" x2="771" y1="322.1797" y2="322.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="652" y="317.1138">usuario</text><polygon fill="#A80036" points="256,354.3125,246,358.3125,256,362.3125,252,358.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="629" y1="358.3125" y2="358.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="262" y="353.2466">contenedor</text><polygon fill="#A80036" points="873,383.4453,883,387.4453,873,391.4453,877,387.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="879" y1="387.4453" y2="387.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="252" y="382.3794">getPromedioCostoBase(peso, volumen)</text><polygon fill="#A80036" points="256,412.5781,246,416.5781,256,420.5781,252,416.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="889" y1="416.5781" y2="416.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="262" y="411.5122">costoBase</text><polygon fill="#A80036" points="873,441.7109,883,445.7109,873,449.7109,877,445.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="879" y1="445.7109" y2="445.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="252" y="440.645">getConsumoPromedio()</text><polygon fill="#A80036" points="256,470.8438,246,474.8438,256,478.8438,252,474.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="889" y1="474.8438" y2="474.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="262" y="469.7778">consumoPromedio</text><polygon fill="#A80036" points="999,499.9766,1009,503.9766,999,507.9766,1003,503.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1005" y1="503.9766" y2="503.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="252" y="498.9106">getBySolicitud(idSolicitud)</text><polygon fill="#A80036" points="256,529.1094,246,533.1094,256,537.1094,252,533.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="1015" y1="533.1094" y2="533.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="262" y="528.0435">rutaExistente</text><path d="M186,548.1094 L250,548.1094 L250,555.1094 L240,565.1094 L186,565.1094 L186,548.1094 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="119.3359" style="stroke: #000000; stroke-width: 2.0;" width="1048" x="186" y="548.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="201" y="561.1763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="265" y="560.3198">[rutaExiste]</text><polygon fill="#A80036" points="1144,582.375,1154,586.375,1144,590.375,1148,586.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1150" y1="586.375" y2="586.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="252" y="581.3091">deleteByRutaId(idRuta)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="186" x2="1234" y1="595.375" y2="595.375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="191" y="605.5854">[nuevaRuta]</text><polygon fill="#A80036" points="999,626.3125,1009,630.3125,999,634.3125,1003,630.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1005" y1="630.3125" y2="630.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="252" y="625.2466">save(ruta)</text><polygon fill="#A80036" points="256,655.4453,246,659.4453,256,663.4453,252,659.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="1015" y1="659.4453" y2="659.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="262" y="654.3794">rutaGuardada</text><path d="M186,681.4453 L263,681.4453 L263,688.4453 L253,698.4453 L186,698.4453 L186,681.4453 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="191.9297" style="stroke: #000000; stroke-width: 2.0;" width="1306" x="186" y="681.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="201" y="694.5122">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="278" y="693.6558">[Para cada par de ubicaciones]</text><polygon fill="#A80036" points="1278.5,715.7109,1288.5,719.7109,1278.5,723.7109,1282.5,719.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1284.5" y1="719.7109" y2="719.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="252" y="714.645">getUbicacionById(idOrigen)</text><polygon fill="#A80036" points="256,744.8438,246,748.8438,256,752.8438,252,748.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="1294.5" y1="748.8438" y2="748.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="262" y="743.7778">ubicacionOrigen</text><polygon fill="#A80036" points="1278.5,773.9766,1288.5,777.9766,1278.5,781.9766,1282.5,777.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1284.5" y1="777.9766" y2="777.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="252" y="772.9106">getUbicacionById(idDestino)</text><polygon fill="#A80036" points="256,803.1094,246,807.1094,256,811.1094,252,807.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="1294.5" y1="807.1094" y2="807.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="262" y="802.0435">ubicacionDestino</text><polygon fill="#A80036" points="1407.5,832.2422,1417.5,836.2422,1407.5,840.2422,1411.5,836.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1413.5" y1="836.2422" y2="836.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="252" y="831.1763">calcularDistancia(origen, destino)</text><polygon fill="#A80036" points="256,861.375,246,865.375,256,869.375,252,865.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="1423.5" y1="865.375" y2="865.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="262" y="860.3091">routeResponse</text><polygon fill="#A80036" points="1139,897.5078,1149,901.5078,1139,905.5078,1143,901.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1145" y1="901.5078" y2="901.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="252" y="896.4419">saveAll(tramos)</text><polygon fill="#A80036" points="256,926.6406,246,930.6406,256,934.6406,252,930.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="1155" y1="930.6406" y2="930.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="262" y="925.5747">tramosGuardados</text><polygon fill="#A80036" points="483,955.7734,493,959.7734,483,963.7734,487,959.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="489" y1="959.7734" y2="959.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="252" y="954.7075">editSolicitud(requestEdit)</text><polygon fill="#A80036" points="256,984.9063,246,988.9063,256,992.9063,252,988.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="499" y1="988.9063" y2="988.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="262" y="983.8403">response</text><polygon fill="#A80036" points="999,1014.0391,1009,1018.0391,999,1022.0391,1003,1018.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="1005" y1="1018.0391" y2="1018.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="252" y="1012.9731">update(ruta)</text><polygon fill="#A80036" points="256,1043.1719,246,1047.1719,256,1051.1719,252,1047.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="250" x2="1015" y1="1047.1719" y2="1047.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="262" y="1042.106">rutaActualizada</text><polygon fill="#A80036" points="59,1072.3047,49,1076.3047,59,1080.3047,55,1076.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="53" x2="239" y1="1076.3047" y2="1076.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="65" y="1071.2388">response</text><!--MD5=[8e8c8c15c544942e8e93bcc3e1589429]
@startuml
title RutaService - getRutaTentativa 

hide footbox

actor "Cliente/API" as C
control "RutaService" as RS
control "EnviosService" as ES
control "ContenedorService" as CS
control "UsuarioService" as US
control "CamionService" as CMS
participant "RutaRepository" as RR
participant "TramoRepository" as TR
control "UbicacionService" as UBS
participant "OsrmApiClient" as OSRM

C -> RS: getRutaTentativa(request)

activate RS

RS -> ES: getSolicitudTrasladoById(idSolicitud)
activate ES
ES - -> RS: solicitud
deactivate ES

RS -> CS: getById(idContenedor)
activate CS
    opt idCliente != null
        CS -> US: getById(idCliente)
        activate US
        US - -> CS: usuario
        deactivate US
    end
CS - -> RS: contenedor
deactivate CS

RS -> CMS: getPromedioCostoBase(peso, volumen)
activate CMS
CMS - -> RS: costoBase
deactivate CMS

RS -> CMS: getConsumoPromedio()
activate CMS
CMS - -> RS: consumoPromedio
deactivate CMS

RS -> RR: getBySolicitud(idSolicitud)
activate RR
RR - -> RS: rutaExistente
deactivate RR

alt rutaExiste
    RS -> TR: deleteByRutaId(idRuta)
else nuevaRuta
    RS -> RR: save(ruta)
    activate RR
    RR - -> RS: rutaGuardada
    deactivate RR
end

loop Para cada par de ubicaciones
    RS -> UBS: getUbicacionById(idOrigen)
    activate UBS
    UBS - -> RS: ubicacionOrigen
    deactivate UBS

    RS -> UBS: getUbicacionById(idDestino)
    activate UBS
    UBS - -> RS: ubicacionDestino
    deactivate UBS

    RS -> OSRM: calcularDistancia(origen, destino)
    activate OSRM
    OSRM - -> RS: routeResponse
    deactivate OSRM
end

RS -> TR: saveAll(tramos)
activate TR
TR - -> RS: tramosGuardados
deactivate TR

RS -> ES: editSolicitud(requestEdit)
activate ES
ES - -> RS: response
deactivate ES

RS -> RR: update(ruta)
activate RR
RR - -> RS: rutaActualizada
deactivate RR

RS - -> C: response
deactivate RS
@enduml

PlantUML version 1.2020.02(Sun Mar 01 07:22:07 ART 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-LTS
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>